[[local|localrc]]

OSBRANCH=stable/rocky

enable_plugin heat               https://git.openstack.org/openstack/heat $OSBRANCH
enable_plugin heat-dashboard     https://git.openstack.org/openstack/heat-dashboard $OSBRANCH
enable_plugin octavia            https://git.openstack.org/openstack/octavia $OSBRANCH
enable_plugin octavia-dashboard  https://git.openstack.org/openstack/octavia-dashboard $OSBRANCH
enable_plugin barbican           https://git.openstack.org/openstack/barbican $OSBRANCH
enable_plugin designate          https://git.openstack.org/openstack/designate $OSBRANCH
enable_plugin osprofiler         https://git.openstack.org/openstack/osprofiler $OSBRANCH
enable_plugin masakari           https://git.openstack.org/openstack/masakari $OSBRANCH
enable_plugin masakari-dashboard https://git.openstack.org/openstack/masakari-dashboard $OSBRANCH
enable_plugin panko              https://git.openstack.org/openstack/panko $OSBRANCH
enable_plugin ceilometer         https://git.openstack.org/openstack/ceilometer $OSBRANCH
enable_plugin senlin             https://git.openstack.org/openstack/senlin $OSBRANCH
enable_plugin senlin-dashboard   https://git.openstack.org/openstack/senlin-dashboard $OSBRANCH
enable_plugin aodh               https://git.openstack.org/openstack/aodh $OSBRANCH

LIBVIRT_TYPE=kvm
OSPROFILER_COLLECTOR=redis

HOST_IP=192.168.1.43
SERVICE_HOST=192.168.1.43
MYSQL_HOST=192.168.1.43
RABBIT_HOST=192.168.1.43
GLANCE_HOSTPORT=192.168.1.43:9292
ADMIN_PASSWORD=admin83aubin
DATABASE_PASSWORD=admin83aubin
RABBIT_PASSWORD=admin83aubin
SERVICE_PASSWORD=admin83aubin
SERVICE_TOKEN=admin83aubin
IP_VERSION=4

# Enable Swift (Object Store) without replication
enable_service s-proxy s-object s-container s-account
SWIFT_HASH=66a3d6b56c1f479c8b4e70ab5c2000f5
SWIFT_REPLICAS=1
SWIFT_DATA_DIR=$DEST/data/swift

## Neutron options
Q_USE_SECGROUP=True
FLOATING_RANGE="192.168.1.0/24"
IPV4_ADDRS_SAFE_TO_USE="10.0.0.0/22"
Q_FLOATING_ALLOCATION_POOL=start=192.168.1.150,end=192.168.1.254
PUBLIC_NETWORK_GATEWAY="192.168.1.1"
PUBLIC_INTERFACE=ens192
Q_L3_ENABLED=True

# Open vSwitch provider networking configuration
Q_USE_PROVIDERNET_FOR_PUBLIC=True
OVS_PHYSICAL_BRIDGE=br-ex
PUBLIC_BRIDGE=br-ex
OVS_BRIDGE_MAPPINGS=public:br-ex

# Enable Logging
LOGFILE=$DEST/logs/stack.sh.log
VERBOSE=True
LOG_COLOR=False

# Pre-requisite
ENABLED_SERVICES=rabbit,mysql,key
# Horizon - enable for the OpenStack web GUI
ENABLED_SERVICES+=,horizon
# Heat
ENABLED_SERVICES+=,heat,h-api,h-api-cfn,h-api-cw,h-eng
# Nova
ENABLED_SERVICES+=,n-api,n-crt,n-obj,n-cpu,n-cond,n-sch,n-api-meta,n-sproxy
ENABLED_SERVICES+=,placement-api,placement-client
# Glance
ENABLED_SERVICES+=,g-api,g-reg
# Neutron
disable_service n-net
ENABLED_SERVICES+=,q-svc,q-agt,q-dhcp,q-l3,q-meta,neutron
ENABLED_SERVICES+=,octavia,o-cw,o-hk,o-hm,o-api
# Cinder
ENABLED_SERVICES+=,c-api,c-vol,c-sch,c-bak
# Tempest
ENABLED_SERVICES+=,tempest
# Barbican - Optionally used for TLS offload in Octavia
ENABLED_SERVICES+=,barbican

# Ceilometer
enable_service ceilometer-acompute ceilometer-acentral ceilometer-anotification ceilometer-collector ceilometer-api
CEILOMETER_EVENT_ALARM=True
CEILOMETER_BACKEND=gnocchi
CEILOMETER_PIPELINE_INTERVAL=60

# Aodh
enable_service aodh-evaluator aodh-notifier aodh-api aodh-listener

# ===== END localrc =====

[[post-config|/$Q_PLUGIN_CONF_FILE]]
global_physnet_mtu = 1400

